

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Create a new radio configuration &mdash; PaparazziUAV _devel documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="IMU Configuration" href="imu_configuration.html" />
    <link rel="prev" title="Write a New Module" href="write_module.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> PaparazziUAV
          

          
          </a>

          
            
            
              <div class="version">
                5.13
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index_start.html">QuickStart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index_installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index_user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/index_developer.html">Developer Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index_tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../beginner/index_beginner.html">Beginner</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index_intermediate.html">Intermediate</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="write_module.html">Write a New Module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Create a new radio configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#kill-switch-configuration">Kill switch configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="imu_configuration.html">IMU Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/index_advanced.html">Advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfacing_with_paparazzi.html">Interfacing with Paparazzi</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/index_support.html">Support</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PaparazziUAV</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index_tutorials.html">Tutorials</a> &raquo;</li>
        
          <li><a href="index_intermediate.html">Intermediate</a> &raquo;</li>
        
      <li>Create a new radio configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/intermediate/create_radio.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-a-new-radio-configuration">
<h1>Create a new radio configuration<a class="headerlink" href="#create-a-new-radio-configuration" title="Permalink to this headline">¶</a></h1>
<p>In this tutotial, you will learn how to create or modify a radio configuration file to use your radio with paparazzi.</p>
<p>For this tutorial, you need to have a working telemetry.</p>
<p>Before starting, you have to bind your radio to the receiver, and configure your radio to send all needed channels. See the documentation of your radio and receiver to do it. For some radios, there is nothing to configure, but for others, you will have to select the channels you want to send. The configuration depend on your radio so it will not be explained here, but you will be able to know if all needed channels are send.</p>
<p>Fist, power-on your radio and your drone, and start a session with the needed processes to fly a drone : you should at least launch the <em>Server</em>, the <em>Data Link</em> and the <em>GCS</em>.</p>
<p>Wait to have link with the drone, then set the telemetry mode to <em>ppm</em>.</p>
<p>To change the telemetry mode, go on the <em>Settings</em> tab, then <em>System</em> and <em>Telemetry</em>. Select <em>ppm</em> in the drop down box and send this command to the drone by hitting the commit button. Wait for the drone to be in <em>ppm</em> mode. (The label at the left of the drop down box should change to <em>ppm</em> shortly after hitting the commit button.)</p>
<img alt="Set telemetry in PPM mode." class="align-center" src="../../_images/ppm_mode.png" />
<p>Once you are in <em>ppm</em> mode, go to the paparazzi center, then launch the “Messages” process (<em>Tools</em> -&gt; <em>Messages</em>).</p>
<p>You should see a <em>PPM</em> section. Click on it to display the values, shown coma separated. If you move the joystick on your radio, the values should change. Check if all needed axis are working, including mode switch and kill switch. If this is not he case, the problem is most probably coming from your radio.</p>
<img alt="PPM messages" class="align-center" src="../../_images/ppm_messages.png" />
<p>Go in <code class="docutils literal notranslate"><span class="pre">$PAPARAZZI_SRC/conf/radio</span></code> and copy the <code class="docutils literal notranslate"><span class="pre">dummy.xml</span></code> file with the name of your radio. Edit it, and modify the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">radio</span></code> tag with your radio name.
Add as many channel as wanted, based on the following example :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;radio</span> <span class="na">name=</span><span class="s">&quot;My own FrSky X9D&quot;</span> <span class="na">data_min=</span><span class="s">&quot;900&quot;</span> <span class="na">data_max=</span><span class="s">&quot;2100&quot;</span> <span class="na">sync_min =</span><span class="s">&quot;5000&quot;</span> <span class="na">sync_max =</span><span class="s">&quot;15000&quot;</span> <span class="na">pulse_type=</span><span class="s">&quot;POSITIVE&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;channel</span> <span class="na">function=</span><span class="s">&quot;ROLL&quot;</span>     <span class="na">min=</span><span class="s">&quot;987&quot;</span> <span class="na">neutral=</span><span class="s">&quot;1503&quot;</span> <span class="na">max=</span><span class="s">&quot;2011&quot;</span> <span class="na">average=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;channel</span> <span class="na">function=</span><span class="s">&quot;PITCH&quot;</span>    <span class="na">min=</span><span class="s">&quot;987&quot;</span> <span class="na">neutral=</span><span class="s">&quot;1451&quot;</span> <span class="na">max=</span><span class="s">&quot;2011&quot;</span> <span class="na">average=</span><span class="s">&quot;0&quot;</span> <span class="na">reverse=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;channel</span> <span class="na">function=</span><span class="s">&quot;YAW&quot;</span>      <span class="na">min=</span><span class="s">&quot;990&quot;</span> <span class="na">neutral=</span><span class="s">&quot;1500&quot;</span> <span class="na">max=</span><span class="s">&quot;2011&quot;</span> <span class="na">average=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;channel</span> <span class="na">function=</span><span class="s">&quot;THROTTLE&quot;</span> <span class="na">min=</span><span class="s">&quot;998&quot;</span> <span class="na">neutral=</span><span class="s">&quot;998&quot;</span> <span class="na">max=</span><span class="s">&quot;2011&quot;</span> <span class="na">average=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;channel</span> <span class="na">function=</span><span class="s">&quot;MODE&quot;</span>    <span class="na">min=</span><span class="s">&quot;987&quot;</span> <span class="na">neutral=</span><span class="s">&quot;1500&quot;</span> <span class="na">max=</span><span class="s">&quot;2011&quot;</span> <span class="na">average=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/radio&gt;</span>
</pre></div>
</div>
<p>You should at least have these four channels to control your drone. The last one is for the mode selection.</p>
<p>It is essential that the order of these lines match the order of the channels in the <em>Messages</em> process.</p>
<p>For each channel, move the joystick to its neutral position, then to the extremes positions, and look at the values displayed in the <em>Messages</em> process. Write these values in the <code class="docutils literal notranslate"><span class="pre">neutral</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> attributes of the corresponding channel in your radio file. The min value shall be inferior to the max value. If the channel needs to be reversed, set the <code class="docutils literal notranslate"><span class="pre">reverse</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">1</span></code>, such as in the <em>PITCH</em> channel of the above example.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the THROTTLE channel, set the neutral position at the minimum throttle position.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The old way of reversing a channel was to switch the <em>min</em> and <em>max</em> attributes. This is still working for compatibility reasons, but it is deprecated and will be an error in the next major release. Please use the <em>reverse</em> attibute.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There used to be a <em>ctl</em> attribute. This is now deprecated, and it have never been used anyway, so remove it if you still have it in your file.</p>
</div>
<p>Make sure that the <em>data_min</em> and <em>data_max</em> attributes are respectively lower and higher than the min and max values you picked up.</p>
<p>See the comments in the radios file for more details.</p>
<div class="section" id="kill-switch-configuration">
<h2>Kill switch configuration<a class="headerlink" href="#kill-switch-configuration" title="Permalink to this headline">¶</a></h2>
<p>For safety reasons, it’s a good practise to configure a kill switch before doing any flights with your drone.</p>
<p>To do it, add at the correct position the following channel, and adjust the min, neutral and max values according to your radio.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;channel</span> <span class="na">ctl=</span><span class="s">&quot;KILL&quot;</span> <span class="na">function=</span><span class="s">&quot;GEAR&quot;</span>   <span class="na">min=</span><span class="s">&quot;987&quot;</span> <span class="na">neutral=</span><span class="s">&quot;1500&quot;</span> <span class="na">max=</span><span class="s">&quot;2011&quot;</span> <span class="na">average=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Then, in the airframe file, add the following define to the <code class="docutils literal notranslate"><span class="pre">radio_control</span></code> module. Create it if necessary :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;define</span> <span class="na">name=</span><span class="s">&quot;RADIO_KILL_SWITCH&quot;</span> <span class="na">value=</span><span class="s">&quot;RADIO_GEAR&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The result should looks like that, with some differences according to your configuration :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;module</span> <span class="na">name=</span><span class="s">&quot;radio_control&quot;</span> <span class="na">type=</span><span class="s">&quot;sbus&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;define</span> <span class="na">name=</span><span class="s">&quot;RADIO_KILL_SWITCH&quot;</span> <span class="na">value=</span><span class="s">&quot;RADIO_GEAR&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/module&gt;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="imu_configuration.html" class="btn btn-neutral float-right" title="IMU Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="write_module.html" class="btn btn-neutral float-left" title="Write a New Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018, Paparazzi UAV Team

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>